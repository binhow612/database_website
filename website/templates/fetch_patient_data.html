<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Information</title>
    <!-- Linking CSS file using url_for -->
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <header>
      <h1>Patient Information</h1>
    </header>
    <nav>
      <ul>
        <li><a href="#" id="button1">Home</a></li>
      </ul>
    </nav>
    <form id="patientForm" action="#" method="post">
      <select id="dropdown" name="patient_type" required>
        <option value="" disabled selected hidden>
          Select type of patient
        </option>
        <option value="OP">OP</option>
        <option value="IP">IP</option>
      </select>
      <label for="code">Enter Patient Code:</label>
      <input type="text" id="code" name="code" required />
      <button type="submit">Submit</button>
    </form>
    <!-- <pre> -->
    <!-- </pre> -->
    {% if message %} {% if (message[0]['patient_type'] == 'OP')%}
    <table style="margin: 0px auto">
      <tr>
        <th>Name</th>
        <th>Phone num</th>
        <th>Address</th>
        <th>Doctor Code</th>
        <th>Examine series no</th>
        <th>Examine no</th>
        <th>Treat time</th>
        <th>Treat date</th>
        <th>Next date</th>
        <th>Fee</th>
        <th>Diagnosis</th>
      </tr>

      {% for value in message %}
      <tr>
        <td>{{ value['fname'] }} {{ value['lname'] }}</td>
        <td>{{ value['phone_number'] }}</td>
        <td>{{ value['address'] }}</td>
        <td>{{ value['doc_code'] }}</td>
        <td>{{ value['exami_series_no'] }}</td>
        <td>{{ value['exami_no'] }}</td>
        <td>{{ value['exami_time'] }}</td>
        <td>{{ value['exami_date'] }}</td>
        <td>{{ value['next_date'] }}</td>
        <td>{{ value['fee'] }}</td>
        <td>{{ value['diagnosis'] }}</td>
      </tr>
      {% endfor %}
    </table>
    {% else %} {% if (message[0]['patient_type'] == 'IP')%}
    <table style="margin: 0px auto">
      <tr>
        <th>Patient name</th>
        <th>Date of birth</th>
        <th>Phone number</th>
        <th>Address</th>
        <th>Doctor code</th>
        <th>Visit</th>
        <th>Admission date</th>
        <th>Discharge date</th>
        <th>Diagnosis</th>
        <th>Treat number</th>
        <th>Result</th>
      </tr>

      {% for value in message %}
      <tr>
        <td>{{ value['fname'] }} {{ value['lname'] }}</td>
        <td>{{ value['dob'] }}</td>
        <td>{{ value['phone_number'] }}</td>
        <td>{{ value['address'] }}</td>
        <td>{{ value['doc_code'] }}</td>
        <td>{{ value['record_no'] }}</td>
        <td>{{ value['admission_date'] }}</td>
        <td>{{ value['discharge_date'] }}</td>
        <td>{{ value['diagnosis'] }}</td>
        <td>{{ value['treatment_no'] }}</td>
        <td>{{ value['result'] }}</td>
      </tr>
      {% endfor %}
    </table>
    {% else %} {{message}} {% endif %} {% endif %} {% else %} {{ message }} {%
    endif %}
    <footer>
      <p>&copy; 2023 Database Website</p>
    </footer>
    <script>
      document.getElementById("button1").addEventListener("click", function () {
        window.location.href = "homepage";
      });
    </script>
  </body>
</html>
